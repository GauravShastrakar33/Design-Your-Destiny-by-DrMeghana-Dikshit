### Admin portal
### User Management -> Students

Context
We already have an User Management System with Admin and Students.
We have student system with:
* Student list table
* ‚ÄúAdd Student‚Äù modal
* Backend logic to create a student with:
    * full_name (required)
    * email (required, unique)
    * phone (optional)
    * password (optional ‚Üí defaults to User@123)
    * program (required)
    * status = Active

We now need to implement Bulk Upload Students using CSV, behaving exactly like Add Student, but in bulk.

üîπ REQUIREMENT: BULK UPLOAD STUDENTS (CSV)

1Ô∏è‚É£ UI REQUIREMENTS (Students Page)
Button
* Add a ‚ÄúBulk Upload‚Äù button next to ‚ÄúAdd Student‚Äù
On Click
* Open a modal / drawer
Modal Contents
* CSV file upload input (required)
* Program dropdown (required)
    * Dropdown populated from existing programs
* ‚ÄúDownload Sample CSV‚Äù link
* Upload button
* Cancel button
* Validation + error summary area
‚ùå Upload must be blocked if:
* CSV is not selected
* Program is not selected

2Ô∏è‚É£ CSV FORMAT (STRICT)

full_name,email,phone

Column Rules
* full_name ‚Üí required
* email ‚Üí required, must be unique
* phone ‚Üí optional
* program ‚Üí optional column, IGNORED if present
* password ‚Üí optional column, IGNORED if present
* Extra columns ‚Üí ignored
* Header row ‚Üí mandatory

‚ö†Ô∏è Program assignment always comes from the Bulk Upload modal dropdown,‚Ä®not from the CSV.
‚ö†Ô∏è Password is always set using system default (User@123),‚Ä®regardless of CSV content.


üîí Important Safety Note (Must be in prompt)
* CSV must never override:
    * program
    * password
* Even if column exists, backend must ignore it completely.


3Ô∏è‚É£ API ENDPOINT

POST /api/admin/students/bulk-upload
Request
* multipart/form-data
* CSV file key: file
* Program identifier key: programId
* Admin-only access

4Ô∏è‚É£ BACKEND LOGIC
Step 1: Request Validation
* Validate admin role
* Validate programId exists
* Accept only .csv files
* Max rows: 1000

Step 2: CSV Parsing
* Parse CSV using a robust parser
* Trim all values
* Ignore empty rows

Step 3: Row Validation
For each row:
* If full_name missing ‚Üí skip
* If email missing or invalid ‚Üí skip
* If email already exists ‚Üí skip
Each skipped row must capture:
* Row number
* Clear reason

Step 4: Student Creation
For each valid row:
* Create student using the same service / logic as Add Student
* Set:
    * full_name
    * email
    * phone
    * password ‚Üí default (User@123)
    * program ‚Üí from programId (mandatory)
    * status ‚Üí Active
* Use DB transactions
* Do NOT fail entire upload if a row fails

5Ô∏è‚É£ RESPONSE FORMAT (MANDATORY)

{
  "totalRows": 40,
  "created": 32,
  "skipped": 8,
  "errors": [
    { "row": 5, "reason": "Email already exists" },
    { "row": 12, "reason": "Invalid email format" }
  ]
}
* row numbering excludes header
* errors must always be returned (empty array if none)

6Ô∏è‚É£ SECURITY & SAFETY
* Admin-only API
* Prevent duplicate user creation
* Do NOT send emails
* Do NOT auto-login users
* Do NOT store raw CSV after processing

7Ô∏è‚É£ SUCCESS CRITERIA
* Admin can upload CSV via modal
* Program is mandatory and selected once
* Students are created exactly like Add Student
* Partial success allowed
* Clear error reporting
* Student list updates correctly

8Ô∏è‚É£ IMPORTANT IMPLEMENTATION NOTES
* Do NOT create a parallel user creation flow

‚úÖ FINAL DESIGN CONFIRMATION
‚úî Program comes from UI dropdown‚Ä®‚úî CSV contains only student identity fields‚Ä®‚úî No passwords in CSV‚Ä®‚úî Clean admin experience‚Ä®‚úî Secure by default